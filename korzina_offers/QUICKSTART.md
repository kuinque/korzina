# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ FastAPI

## 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

## 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ credentials
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-api-key
```

## 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ß–µ—Ä–µ–∑ Python (—Å auto-reload)
python main.py

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —Å uvicorn
uvicorn main:app --reload --host 0.0.0.0 --port 5000
```

## 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:

1. **Swagger UI (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)**:
   ```
   http://localhost:5000/docs
   ```
   –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ endpoints –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!

2. **ReDoc (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)**:
   ```
   http://localhost:5000/redoc
   ```

3. **Health Check**:
   ```bash
   curl http://localhost:5000/api/health
   ```

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```bash
# 1. Health Check
curl http://localhost:5000/api/health

# 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:5000/api/stats

# 3. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (POST)
curl -X POST http://localhost:5000/api/search \
  -H "Content-Type: application/json" \
  -d '{"products": ["—è–±–ª–æ–∫–∏", "–º–æ–ª–æ–∫–æ", "—Ö–ª–µ–±"]}'

# 4. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (GET)
curl "http://localhost:5000/api/search/get?products=—è–±–ª–æ–∫–∏,–º–æ–ª–æ–∫–æ"

# 5. –¢–æ–≤–∞—Ä—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞
curl "http://localhost:5000/api/products?shop=–ü—è—Ç–µ—Ä–æ—á–∫–∞"

# 6. –ü–æ–∏—Å–∫ –≤ —Ç–æ–≤–∞—Ä–∞—Ö –º–∞–≥–∞–∑–∏–Ω–∞
curl "http://localhost:5000/api/products?shop=–ü—è—Ç–µ—Ä–æ—á–∫–∞&q=–º–æ–ª–æ–∫–æ"
```

## 5Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=app

# –° HTML –æ—Ç—á–µ—Ç–æ–º
pytest --cov=app --cov-report=html
# –û—Ç–∫—Ä–æ–π—Ç–µ htmlcov/index.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

## 6Ô∏è‚É£ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–±–æ—Ä–∫–∞
docker build -t korzina-api .

# –ó–∞–ø—É—Å–∫
docker run -p 5000:5000 --env-file .env korzina-api
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å:
- üìö –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger/ReDoc)
- ‚ú® –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- ‚ö° –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (ASGI –≤–º–µ—Å—Ç–æ WSGI)
- üîí Type-safe –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### ‚ö†Ô∏è –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- `FLASK_ENV` ‚Üí `APP_ENV`
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: –∫–æ–¥ `400` ‚Üí `422`
- –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫: `{status, message}` ‚Üí `{detail}`
- –¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `TestClient` –≤–º–µ—Å—Ç–æ Flask test client

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
- **Swagger UI**: http://localhost:5000/docs
- **ReDoc**: http://localhost:5000/redoc
- **OpenAPI JSON**: http://localhost:5000/openapi.json

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "SUPABASE_URL –∏ SUPABASE_KEY –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏ —É–∫–∞–∂–∏—Ç–µ credentials –æ—Ç Supabase

### –û—à–∏–±–∫–∞: "ModuleNotFoundError: No module named 'fastapi'"
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`

### –û—à–∏–±–∫–∞: "Address already in use"
–ü–æ—Ä—Ç 5000 –∑–∞–Ω—è—Ç. –£–∫–∞–∂–∏—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç:
```bash
uvicorn main:app --reload --port 8000
```

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black app tests

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
flake8 app tests

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy app

# –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
make ci
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à FastAPI —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç! –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000/docs –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å API.
